{% extends 'base.html' %}

{% block titulo %}Lista de pacientes{% endblock titulo %}

{% block contenido %}

<h1>{{ "lista de pacientes"|capfirst }}</h1>



{% regroup  object_list by estado as lista_ciudad %}

<ul>
    {% for ciudad in  lista_ciudad %}
    <li>{{ ciudad.grouper }}
        <ul>
            {% for pacientes in ciudad.list %}
          <li>{{pacientes.nombre }}: {{ pacientes.primerApellido }}</li>
          {% endfor %}
        </ul>
    </li>
    {% endfor %}
</ul>


{% regroup  object_list by tipo_sangre as lista_san %}

<ul>
    {% for sangre in  lista_san %}
    <li>{{ sangre.grouper }}
        <ul>
            {% for pacientes in sangre.list %}
            <li>{{pacientes.nombre }}: {{ pacientes.primerApellido }}</li>
            {% endfor %}
        </ul>
    </li>
    {% endfor %}
</ul>


{% comment %}

<h3>-------------------</h3>

<a title="Confirmar compra" class="button type1" style="color: red;"  href="{% url 'pacientes:filtrar' 1 %}">
    <i class="fas fa-tint"></i>
</a>

<h3>-------------------</h3>

{% endcomment %}

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Apellido paterno</th>
            <th>Apellido materno</th>
            <th>Fecha de nacimiento</th>
            <th>No. Seguro social</th>
            <th>Tipo de sangre</th>
            <th>Opciones</th>
        </tr>
    </thead>
    <tbody>        
        
        {% spaceless %}
            
        
            
        {% for paciente in object_list %}
        <tr>
            <td>{{paciente.nombre}}</td>
            <td>{{paciente.primerApellido}}</td>
            <td>{{paciente.segundoApellido}}</td>
            
            <td>{{ paciente.fecha_nac|date:"SHORT_DATE_FORMAT" }}</td>
            
            <td>"{{ paciente.numero_ss|center:"15" }}"</td>
            <td>{{paciente.tipo_sangre}}</td>
            
            <td>
                <a title="Actualiza paciente" class="btn btn-warning" href="{% url 'pacientes:editar' paciente.id %}">
                    <i class="far fa-edit"></i>
                </a>
                <a title="Elimina paciente" class="btn btn-danger" href="{% url 'pacientes:eliminar' paciente.id %}">
                    <i class="far fa-trash-alt"></i>
                </a>
            </td>
        </tr>
        {% empty %}
        
        <h3>No hay pacientes</h3>
        
        {% endfor %}
        
    </tbody>
</table>


{% with object_list.count as total  %}
    {{total}} paciente{{total|pluralize}}

<ul>add:

    <li>{{total|add:"4"}}</li>
</ul>
{% endwith %}


{{ "estoy' usando'addslashes" |addslashes}}


<h1>-------------------</h1>

{% endspaceless %}


{% autoescape on %}

{% firstof object_list "Lista vacia" %}

{% comment %}

{% lorem  %}
    
{% endcomment %}

{% endautoescape %}


<nav aria-label="...">
    <ul class="pagination">
        
        {% if page_obj.has_previous %}
            <li>
                <a class="page-link" href="?page=1">Firts</a>
            </li>
            <li>
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}" >Previous</a>
            </li>
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">{{page_obj.previous_page_number}}</a></li>
        {% endif %}

      <li class="page-item active">
        <a class="page-link" href="#"> {{ page_obj.number }} <span class="sr-only">(current)</span></a>
      </li>
      
        {% if page_obj.has_next %}
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}">{{ page_obj.next_page_number }}</a></li>
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
            </li>
            <li>
                <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
            </li>
        {% endif %}
    </ul>
  </nav>

  <style>
    @import url("https://fonts.googleapis.com/css?family=Raleway");
* {
  box-sizing: border-box;
}
.copyright {
  position: absolute;
  bottom: 0;
}
.copyright a {
  text-decoration: none;
  color: #16a085;
}
.copyright a:hover {
  text-decoration: underline;
}

.button {
  position: relative;
  padding: 1em 1.5em;
  border: none;
  background-color: transparent;
  cursor: pointer;
  outline: none;
  font-size: 16px;
  margin: 1em 0.8em;
}
.button.type1 {
  color: #566473;
}
.button.type1.type1::after, .button.type1.type1::before {
  content: "";
  display: block;
  position: absolute;
  width: 20%;
  height: 20%;
  border: 2px solid;
  transition: all 0.6s ease;
  border-radius: 2px;
}
.button.type1.type1::after {
  bottom: 0;
  right: 0;
  border-top-color: transparent;
  border-left-color: transparent;
  border-bottom-color: #566473;
  border-right-color: #566473;
}
.button.type1.type1::before {
  top: 0;
  left: 0;
  border-bottom-color: transparent;
  border-right-color: transparent;
  border-top-color: #566473;
  border-left-color: #566473;
}
.button.type1.type1:hover:after, .button.type1.type1:hover:before {
  width: 100%;
  height: 100%;
}
</style>


{% endblock contenido %}
    